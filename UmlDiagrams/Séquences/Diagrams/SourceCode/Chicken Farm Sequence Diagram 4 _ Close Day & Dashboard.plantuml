@startuml CloseDayAndDashboard
actor Cashier
participant DashboardUI
participant Database

Note over Cashier,Database: END OF DAY: Close Cash Register

Cashier->>DashboardUI: Click "Close Day"
DashboardUI->>Database: Query today's transactions
Database-->>DashboardUI: Sales, expenses, payments

DashboardUI->>DashboardUI: Calculate expected cash:<br/>Opening + Cash received - Cash paid
DashboardUI-->>Cashier: Show summary:<br/>Sales: 1,850 MAD<br/>Expenses: 8,000 MAD<br/>Expected cash: 4,900 MAD

Cashier->>Cashier: Count physical cash in drawer
Cashier->>DashboardUI: Enter actual cash: 4,900 MAD

alt Cash matches
    DashboardUI->>Database: Save daily financial record
    DashboardUI-->>Cashier: Day closed âœ“
else Large discrepancy (>50 MAD)
    DashboardUI-->>Cashier: Alert: Discrepancy detected<br/>Needs administration approval
end

Note over Cashier,Database: ANYTIME: View Dashboard

Cashier->>DashboardUI: Open dashboard
DashboardUI->>Database: Query farm status
Database-->>DashboardUI: Chickens, production, inventory, alerts, finances

DashboardUI-->>Cashier: Display:<br/>- Chicken counts (4 houses)<br/>- Today's production (eggs, mortality)<br/>- Inventory levels (feed, eggs, meds)<br/>- Active alerts (low stock, etc.)<br/>- Monthly finances (income/expenses)<br/>- Tasks needing attention

Cashier->>Cashier: Review alerts and plan next actions
@enduml