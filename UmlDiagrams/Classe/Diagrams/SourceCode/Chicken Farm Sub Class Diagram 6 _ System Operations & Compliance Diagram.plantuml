@startuml TaskAlertSystemManagement

' ========================================
' TASK MANAGEMENT
' ========================================

class Task {
    +string taskID
    +string taskName
    +string taskType
    +string priority
    +string status
    +string assignedRole
    +Date dueDate
    +string dueTime
    +Date completedDate
    +string notes
    +boolean isRecurring
    +string createdBy
    +assignTask()
    +completeTask()
    +markOverdue()
    +createRecurring()
}

' ========================================
' ALERT SYSTEM
' ========================================

class Alert {
    +string alertID
    +string alertType
    +string priority
    +string message
    +DateTime timestamp
    +string status
    +string targetUser
    +boolean isResolved
    +Date resolvedDate
    +createAlert()
    +acknowledgeAlert()
    +resolveAlert()
    +escalateAlert()
}

' ========================================
' REPORTING SYSTEM
' ========================================

class Report {
    +string reportID
    +string reportType
    +Date generationDate
    +string period
    +string data
    +string pdfPath
    +Date periodStart
    +Date periodEnd
    +string generatedBy
    +generateReport()
    +exportToPDF()
    +scheduleReport()
    +emailReport()
}

' ========================================
' SYSTEM CONFIGURATION
' ========================================

class SystemConfiguration {
    +string configID
    +string farmName
    +string theme
    +string settings
    +Date lastModified
    +string language
    +string dateFormat
    +string timeFormat
    +boolean autoBackupEnabled
    +string backupFrequency
    +updateSettings()
    +resetToDefaults()
    +exportConfig()
    +importConfig()
}

' ========================================
' LEGAL COMPLIANCE
' ========================================

class LegalDocument {
    +string docID
    +string docType
    +string authority
    +Date issueDate
    +Date expiryDate
    +string documentNumber
    +string pdfPath
    +string description
    +string companyID
    +uploadDocument()
    +renewDocument()
    +checkExpiry()
    +archiveDocument()
}

class Agreement {
    +string agreementID
    +string agreementType
    +string supplierID
    +string customerID
    +string terms
    +Date startDate
    +Date endDate
    +int paymentDelay
    +string returnPolicy
    +float minimumOrder
    +Date renewalDate
    +createAgreement()
    +renewAgreement()
    +terminateAgreement()
}

' ========================================
' COMPANY (Reference)
' ========================================

class Company {
    +string companyID
    +string companyName
    +string ice
    +string rc
    +string onssaAuthorization
    +string cnssNumber
}

' ========================================
' USERS & ROLES (References)
' ========================================

class Cashier {
    +string cashierID
    +string employeeID
    +performTasks()
    +generateReports()
    +receiveAlerts()
}

class Administration {
    +string adminID
    +string department
    +approveTasks()
    +reviewReports()
    +manageAlerts()
    +configureSystem()
}

class Veterinary {
    +string workerID
    +string licenseNumber
    +performHealthTasks()
}

class InventorySupplyTracker {
    +string workerID
    +performInventoryTasks()
}

class FarmhandSupervisor {
    +string workerID
    +performInspectionTasks()
}

' ========================================
' RECORDS (References)
' ========================================

class HealthRecord {
    +string recordID
    +string recordType
    +Date date
}

class ProductionRecord {
    +string recordID
    +string recordType
    +Date date
    +float quantity
}

class InspectionRecord {
    +string inspectionID
    +string inspectionType
    +Date date
}

class AttendanceRecord {
    +string recordID
    +string workerID
    +DateTime timestamp
}

class FinancialRecord {
    +string recordID
    +string recordType
    +float amount
    +Date date
}

class Inventory {
    +string inventoryID
    +float quantity
    +float minThreshold
}

class ChickenBatch {
    +string batchID
    +int currentAge
    +float mortalityRate
}

' ========================================
' TASK ASSIGNMENT RELATIONSHIPS
' ========================================

Cashier "1" -- "*" Task : performs >
Veterinary "1" -- "*" Task : performs >
InventorySupplyTracker "1" -- "*" Task : performs >
FarmhandSupervisor "1" -- "*" Task : performs >
Administration "1" -- "*" Task : approves >

' ========================================
' TASK CREATES RECORDS
' ========================================

Task "1" *-- "0..*" HealthRecord : creates
Task "1" *-- "0..*" ProductionRecord : creates
Task "1" *-- "0..*" InspectionRecord : creates
Task "1" *-- "0..1" AttendanceRecord : creates
Task "1" *-- "0..1" FinancialRecord : creates

' ========================================
' ALERT RELATIONSHIPS
' ========================================

Cashier "1" -- "*" Alert : receives >
Administration "1" -- "*" Alert : receives >
Alert "1" -- "0..1" Task : creates >
Inventory "1" -- "*" Alert : triggers >
ChickenBatch "1" -- "*" Alert : triggers >
HealthRecord "1" -- "0..*" Alert : triggers >

' ========================================
' REPORT RELATIONSHIPS
' ========================================

Cashier "1" -- "*" Report : generates >
Report "1" o-- "*" ProductionRecord : compiles
Report "1" o-- "*" FinancialRecord : compiles
Report "1" o-- "*" HealthRecord : compiles
Report "1" o-- "*" Inventory : compiles
Report "1" o-- "*" Task : compiles

' ========================================
' SYSTEM CONFIGURATION
' ========================================

Company "1" *-- "1" SystemConfiguration : configures
Administration "1" -- "1" SystemConfiguration : manages >

' ========================================
' LEGAL COMPLIANCE
' ========================================

Company "1" *-- "*" LegalDocument : owns
Company "1" -- "*" Agreement : manages >
LegalDocument "1" -- "*" Alert : expiry_triggers >
Agreement "1" -- "*" Alert : renewal_triggers >

' ========================================
' CONSTRAINTS & NOTES
' ========================================

note right of Task
    Task Types & Frequencies:
    
    DAILY (Recurring):
    - Scan Worker Attendance (7:00 AM)
    - Verify House Cleanliness (8:00 AM)
    - Health Check (9:00 AM)
    - Egg Collection Morning (11:00 AM)
    - Egg Collection Afternoon (4:00 PM)
    - Record Feed Consumption (5:00 PM)
    - Record Mortality (5:30 PM)
    - Close Cash Register (6:00 PM)
    
    WEEKLY (Recurring):
    - Deep Clean Houses (Sunday)
    - Inventory Check (Friday 3:00 PM)
    - Financial Review (Saturday 10:00 AM)
    - Plan Next Week (Saturday 2:00 PM)
    
    MONTHLY (Recurring):
    - CNSS Declaration (Last day)
    - Production Analysis (1-3rd)
    - ONSSA Register (Last day)
    - Salary Processing (25-30th)
    
    ONE_TIME:
    - Emergency repairs
    - Special inspections
    - Ad-hoc tasks
    
    Status:
    {PENDING, IN_PROGRESS, COMPLETED,
     OVERDUE, PAUSED, CANCELLED}
    
    Priority:
    {CRITICAL, HIGH, MEDIUM, LOW}
    
    Constraints:
    {if dueDate < today AND status != COMPLETED
      then status = OVERDUE}
    {Cannot logout if CRITICAL task OVERDUE}
end note

note right of Alert
    Alert Types & Priorities:
    
    CRITICAL:
    - HIGH_MORTALITY (> 5%)
    - CNSS_DEADLINE_MISSED
    - ONSSA_INSPECTION_DUE
    - EQUIPMENT_FAILURE
    - CASH_DISCREPANCY (> 100 MAD)
    
    HIGH:
    - LOW_STOCK (< 3 days)
    - EGG_PRODUCTION_DROP (< 80%)
    - OVERDUE_PAYMENT
    - TRANSFER_DUE (24 or 78 weeks)
    - MEDICATION_EXPIRING (< 15 days)
    
    MEDIUM:
    - VACCINATION_REMINDER (< 7 days)
    - CONTRACT_RENEWAL (< 30 days)
    - INVENTORY_CHECK_DUE
    - MAINTENANCE_SCHEDULED
    
    LOW:
    - NEXT_GENERATION_DUE (30 days)
    - REPORT_READY
    - BACKUP_COMPLETED
    
    Auto-Task Creation:
    - LOW_STOCK → Create 'Order Supplies'
    - HIGH_MORTALITY → Create 'Vet Investigation'
    - EQUIPMENT_BROKEN → Create 'Repair Equipment'
    - TRANSFER_DUE → Create 'Transfer Chickens'
    
    Status:
    {ACTIVE, ACKNOWLEDGED, RESOLVED}
end note

note right of Report
    Report Types:
    
    1. PRODUCTION_REPORT
       - Daily/Weekly/Monthly egg production
       - Feed consumption rates
       - Mortality statistics
       - Production efficiency
       Period: Daily/Weekly/Monthly
    
    2. FINANCIAL_REPORT
       - Income vs Expenses
       - Cash flow analysis
       - Profit/Loss statement
       - Payment tracking
       Period: Daily/Weekly/Monthly/Yearly
    
    3. HEALTH_REPORT
       - Vaccination records
       - Disease incidents
       - Mortality trends
       - Veterinary interventions
       Period: Weekly/Monthly
    
    4. INVENTORY_REPORT
       - Stock levels
       - Consumption rates
       - Expiring items
       - Reorder recommendations
       Period: Weekly/Monthly
    
    5. TASK_COMPLETION_REPORT
       - Completed tasks
       - Overdue tasks
       - Performance metrics
       Period: Weekly/Monthly
    
    6. ONSSA_COMPLIANCE_REPORT
       - Health register
       - Vaccination log
       - Mortality register
       Period: Monthly (mandatory)
    
    Output: PDF, Excel, Email
end note

note right of SystemConfiguration
    Configuration Settings:
    
    1. GENERAL:
       - Farm name
       - Language (AR/FR/EN)
       - Theme (Light/Dark/Auto)
       - Date format (DD/MM/YYYY)
       - Time format (12h/24h)
    
    2. BACKUP:
       - Auto backup enabled
       - Frequency (Daily/Every 2 days/Weekly)
       - Backup location
       - Retention period
    
    3. NOTIFICATIONS:
       - Email alerts
       - SMS alerts
       - Push notifications
       - Alert priorities
    
    4. BUSINESS RULES:
       - Low stock threshold days
       - Mortality alert percentage
       - Cash discrepancy limit
       - Payment terms defaults
    
    5. COMPLIANCE:
       - ONSSA requirements
       - CNSS declaration dates
       - Document retention periods
    
    6. USERS & PERMISSIONS:
       - Role-based access
       - Task assignments
       - Report access levels
end note

note right of LegalDocument
    Document Types by Authority:
    
    OMPIC (Office Marocain de la Propriété):
    - Company Registration (RC)
    - Trade Name Certificate
    - Model Status
    
    ONSSA (Office National de Sécurité Sanitaire):
    - Poultry Farm Authorization
    - Health Certificate
    - Veterinary License
    - Annual Renewal (expires yearly)
    
    CNSS (Caisse Nationale de Sécurité Sociale):
    - Affiliation Certificate
    - Monthly Declarations
    - Worker Registration
    
    Ministry of Interior:
    - Business License (Patente)
    - ICE Certificate (15 digits)
    
    Tax Authority:
    - Tax ID (IF - 8 digits)
    - VAT Registration
    
    Expiry Monitoring:
    {if expiryDate - today ≤ 60 days
      then create Alert(DOCUMENT_EXPIRING)}
    
    Renewal Process:
    - Auto-alert 60 days before
    - Create renewal task 30 days before
    - Critical alert 15 days before
end note

note right of Agreement
    Agreement Types:
    
    1. SUPPLIER AGREEMENTS:
       - Annual contracts
       - Payment terms (30/60/90 days)
       - Return policy
       - Minimum order quantities
       - Price terms
       - Delivery schedules
    
    2. CUSTOMER AGREEMENTS:
       - Annual contracts (companies)
       - Credit terms
       - Volume discounts
       - Delivery terms
       - Quality guarantees
    
    Renewal Process:
    {renewalDate = endDate - 30 days}
    
    Auto-Alerts:
    - 60 days: Renewal reminder
    - 30 days: Renewal negotiation
    - 15 days: Urgent renewal
    - 0 days: Agreement expired
    
    Terms:
    - Start date ≤ End date
    - Duration: typically 1 year
    - Auto-renewal option
    - Termination clauses
end note

@enduml