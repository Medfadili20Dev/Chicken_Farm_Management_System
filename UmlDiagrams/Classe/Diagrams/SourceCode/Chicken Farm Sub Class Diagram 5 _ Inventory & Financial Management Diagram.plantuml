@startuml InventoryFinancialManagement

' ========================================
' INVENTORY MANAGEMENT
' ========================================

class Inventory {
    +string inventoryID
    +string itemType
    +string productID
    +float quantity
    +string unit
    +Date lastUpdated
    +float minThreshold
    +float unitPrice
    +Date expirationDate
    +string storageLocation
    +updateStock()
    +checkThreshold()
    +calculateValue()
    +trackExpiration()
}

' ========================================
' FINANCIAL RECORDS
' ========================================

class FinancialRecord {
    +string recordID
    +string recordType
    +float amount
    +string category
    +Date date
    +string description
    +float cashReceived
    +float cashPaid
    +float balance
    +float discrepancy
    +string recordedBy
    +recordIncome()
    +recordExpense()
    +closeDailyRegister()
    +reconcileCash()
}

' ========================================
' PRODUCTS (Reference)
' ========================================

class Product {
    +string productID
    +string productName
    +string productType
    +float price
    +string unit
    +float weight
    +string description
}

class Egg {
    +Date productionDate
    +string qualityStatus
    +string size
    +string grade
}

class Feed {
    +string feedType
    +string ageGroup
    +float proteinContent
    +Date expiryDate
}

class Medication {
    +string medicationType
    +string dosage
    +Date expiryDate
    +int withdrawalPeriod
}

class Equipment {
    +string equipmentType
    +string condition
    +Date lastMaintenanceDate
}

' ========================================
' ROLES MANAGING INVENTORY & FINANCE
' ========================================

class InventorySupplyTracker {
    +string workerID
    +string trackingCertification
    +string[] managedCategories
    +updateInventory()
    +trackConsumption()
    +recordProduction()
    +generateStockReport()
}

class Cashier {
    +string cashierID
    +string employeeID
    +string workstation
    +string[] assignedKeys
    +Date hireDate
    +recordSale()
    +processPurchase()
    +closeCashRegister()
    +reconcileCash()
    +generateFinancialReport()
}

' ========================================
' TRANSACTIONS (References)
' ========================================

class Order {
    +string orderID
    +string orderType
    +Date orderDate
    +float totalAmount
    +string status
}

class Sale {
    +string saleID
    +Date saleDate
    +float totalAmount
    +string paymentStatus
}

class Payment {
    +string paymentID
    +string paymentType
    +float amount
    +Date paymentDate
    +string method
}

class Delivery {
    +string deliveryID
    +Date deliveryDate
    +string status
}

' ========================================
' PRODUCTION RECORDS (Reference)
' ========================================

class ProductionRecord {
    +string recordID
    +string recordType
    +Date date
    +float quantity
    +int cleanEggs
    +int crackedEggs
}

' ========================================
' ALERTS (Reference)
' ========================================

class Alert {
    +string alertID
    +string alertType
    +string priority
    +string message
    +DateTime timestamp
}

' ========================================
' INVENTORY RELATIONSHIPS
' ========================================

Product "1" -- "1" Inventory : tracked_in >
Egg "1" -- "1" Inventory : tracked_in >
Feed "1" -- "1" Inventory : tracked_in >
Medication "1" -- "1" Inventory : tracked_in >
Equipment "1" -- "1" Inventory : tracked_in >

' ========================================
' INVENTORY MANAGEMENT
' ========================================

InventorySupplyTracker "1" -- "*" Inventory : manages >
InventorySupplyTracker "1" -- "*" ProductionRecord : records >
ProductionRecord "1" -- "1" Inventory : updates >

' ========================================
' INVENTORY ALERTS
' ========================================

Inventory "1" -- "*" Alert : triggers >

' ========================================
' STOCK MOVEMENTS
' ========================================

Order "1" -- "*" Inventory : increases_stock >
Sale "1" -- "*" Inventory : decreases_stock >
Delivery "1" -- "*" Inventory : receives_into >

' ========================================
' FINANCIAL MANAGEMENT
' ========================================

Cashier "1" -- "*" FinancialRecord : maintains >
Order "1" -- "1..*" FinancialRecord : generates_expense >
Sale "1" -- "1" FinancialRecord : generates_income >
Payment "1" -- "1" FinancialRecord : recorded_in >

' ========================================
' PRODUCT INHERITANCE
' ========================================

Product <|-- Egg : inherits
Product <|-- Feed : inherits
Product <|-- Medication : inherits
Product <|-- Equipment : inherits

' ========================================
' CONSTRAINTS & NOTES
' ========================================

note right of Inventory
    Item Types:
    - EGG (produced)
    - FEED (consumed)
    - MEDICATION (used)
    - EQUIPMENT (owned)
    - CHICK (purchased)
    
    Stock Formula:
    quantity(t+1) = quantity(t)
      + deliveries(t)
      - sales(t)
      - consumption(t)
    
    Constraints:
    {quantity ≥ 0}
    {quantity < minThreshold → Alert}
    {expirationDate monitoring}
end note

note right of FinancialRecord
    Record Types:
    1. INCOME
       - Customer sales
       - Product sales
       
    2. EXPENSE
       - Supplier purchases
       - Worker salaries
       - Utilities
       - Maintenance
       
    3. CASH_REGISTER
       - Daily opening
       - Daily closing
       - Cash reconciliation
    
    Daily Register:
    balance = cashReceived - cashPaid
    discrepancy = actualCash - balance
    {if discrepancy > 50 MAD → Admin approval}
end note

note right of InventorySupplyTracker
    Responsibilities:
    
    1. Track Production
       - Record egg collection
       - Update egg inventory
       - Track cracked vs clean
    
    2. Monitor Consumption
       - Daily feed usage
       - Medication usage
       - Calculate rates
    
    3. Manage Stock
       - Update quantities
       - Check thresholds
       - Request reorders
    
    4. Generate Reports
       - Stock levels
       - Consumption rates
       - Expiration warnings
end note

note right of Cashier
    Daily Financial Tasks:
    
    1. Morning:
       - Open cash register
       - Record opening balance
       - Verify starting cash
    
    2. Throughout Day:
       - Process sales
       - Record payments
       - Issue receipts/invoices
       - Track cash/card
    
    3. Evening:
       - Close cash register
       - Count physical cash
       - Reconcile discrepancies
       - Generate daily report
       - Submit to Administration
    
    {Cannot logout if register unclosed}
end note

note right of Alert
    Inventory Alerts:
    
    1. LOW_STOCK
       - Feed < 7 days supply
       - Medication < threshold
       - Priority: HIGH
    
    2. MEDICATION_EXPIRING
       - < 30 days to expiry
       - Priority: MEDIUM
    
    3. EGG_PRODUCTION_DROP
       - < 80% of expected
       - Priority: HIGH
    
    4. EQUIPMENT_BROKEN
       - Needs repair/replacement
       - Priority: CRITICAL
    
    Financial Alerts:
    
    5. CASH_DISCREPANCY
       - > 50 MAD difference
       - Priority: HIGH
    
    6. OVERDUE_PAYMENT
       - Past payment terms
       - Priority: HIGH
end note

@enduml