@startuml WorkerHierarchy

' ========================================
' WORKER HIERARCHY
' ========================================

abstract class Worker {
    +string workerID
    +string cin
    +string fullName
    +string address
    +string phone
    +string email
    +string emergencyContact
    +Date birthDate
    +Date startDate
    +Date endDate
    +string position
    +float monthlySalary
    +string cnssNumber
    +string status
    +string workerType
}

class Veterinary {
    +string licenseNumber
    +string[] specializations
    +Date licenseExpiryDate
    +createHealthRecord()
    +prescribeMedication()
    +conductVaccination()
}

class InventorySupplyTracker {
    +string trackingCertification
    +string[] managedCategories
    +trackInventory()
    +recordProduction()
    +updateStock()
}

class FarmhandSupervisor {
    +int subordinateCount
    +string[] responsibilities
    +string shiftSchedule
    +assignTasks()
    +inspectHouses()
    +supervise()
}

class Farmhand {
    +string assignedTasks
    +string supervisorID
    +string shiftSchedule
    +performDailyTasks()
    +cleanHouses()
    +feedChickens()
}

' ========================================
' ADMINISTRATIVE ROLES
' ========================================

class Cashier {
    +string cashierID
    +string employeeID
    +string workstation
    +string[] assignedKeys
    +Date hireDate
    +processSales()
    +managePayments()
    +closeRegister()
    +generateReports()
}

class Administration {
    +string adminID
    +string department
    +string[] permissions
    +string decisionLevel
    +Date appointmentDate
    +manageWorkers()
    +approveTasks()
    +reviewReports()
    +makeDecisions()
}

' ========================================
' SYSTEM ACCESS
' ========================================

class User {
    +string userID
    +string username
    +string password
    +string role
    +string qrCode
    +string[] permissions
    +Date lastLogin
    +string email
    +string phone
    +boolean isActive
    +login()
    +logout()
    +scanQR()
    +changePassword()
}

' ========================================
' EMPLOYMENT DOCUMENTS
' ========================================

class EmploymentDocument {
    +string docID
    +string docType
    +Date issueDate
    +string content
    +string pdfPath
    +Date signatureDate
    +string month
    +string workerID
    +string signedBy
    +generatePDF()
    +sendToCNSS()
}

' ========================================
' ATTENDANCE TRACKING
' ========================================

class AttendanceRecord {
    +string recordID
    +string workerID
    +string scanType
    +DateTime timestamp
    +Date date
    +string qrCodeData
    +string location
    +recordEntry()
    +recordExit()
    +calculateHours()
}

' ========================================
' SALARY MANAGEMENT
' ========================================

class WorkerSalary {
    +string salaryID
    +string workerID
    +string month
    +float baseSalary
    +int daysWorked
    +float cnssDeduction
    +float amoDeduction
    +float incomeTax
    +float netSalary
    +float overtime
    +float bonuses
    +Date paymentDate
    +calculateNet()
    +generatePayslip()
    +declareToCNSS()
}

' ========================================
' PAYMENT
' ========================================

class Payment {
    +string paymentID
    +string paymentType
    +float amount
    +string method
    +Date paymentDate
    +Date invoiceDate
    +string referenceNumber
    +string paidBy
    +string receivedBy
    +processPayment()
    +generateReceipt()
}

' ========================================
' COMPANY REFERENCE
' ========================================

class Company {
    +string companyID
    +string companyName
    +string cnssNumber
    +employWorker()
    +terminateWorker()
}

' ========================================
' INHERITANCE RELATIONSHIPS
' ========================================

Worker <|-- Veterinary : inherits
Worker <|-- InventorySupplyTracker : inherits
Worker <|-- FarmhandSupervisor : inherits
Worker <|-- Farmhand : inherits

' ========================================
' EMPLOYMENT RELATIONSHIPS
' ========================================

Company "1" -- "*" Worker : employs >
Worker "1" -- "*" EmploymentDocument : has >
Worker "1" -- "*" AttendanceRecord : records >
Worker "1" -- "*" WorkerSalary : earns >

' ========================================
' SALARY & PAYMENT FLOW
' ========================================

AttendanceRecord "*" -- "1" WorkerSalary : calculates >
WorkerSalary "1" -- "1" EmploymentDocument : generates_payslip >
WorkerSalary "1" -- "1" Payment : triggers >
Worker "1" -- "*" Payment : receives >

' ========================================
' SYSTEM ACCESS RELATIONSHIPS
' ========================================

Worker "1" -- "0..1" User : has_account >
Cashier "1" -- "1" User : has_account >
Administration "1" -- "1" User : has_account >
User "1" -- "*" AttendanceRecord : creates_via_scan >

' ========================================
' MANAGEMENT RELATIONSHIPS
' ========================================

Administration "1" -- "*" Worker : manages >
Cashier "1" -- "*" Worker : tracks_attendance >
FarmhandSupervisor "1" -- "*" Farmhand : supervises >

' ========================================
' CONSTRAINTS & NOTES
' ========================================

note right of Worker
    Constraints:
    {age ≥ 18}
    {cin.length = 8 or 12}
    {cnssNumber.length = 8}
    {status ∈ {ACTIVE, TERMINATED}}
end note

note right of WorkerSalary
    Calculations:
    netSalary = baseSalary
      - cnssDeduction (4.48%)
      - amoDeduction (2.26%)
      - incomeTax + bonuses
end note

note right of AttendanceRecord
    QR Code System:
    - Entry scan (morning)
    - Exit scan (evening)
    - Max 1 entry + 1 exit per day
end note

note right of EmploymentDocument
    Document Types:
    - CONTRACT
    - PAYSLIP (monthly)
    - CNSS_DECLARATION
    - WORK_CERTIFICATE
    - ATTESTATION_TRAVAIL
end note

note right of User
    Authentication:
    username = email or phone
    password ≥ 8 chars
    QR code for attendance
end note

@enduml